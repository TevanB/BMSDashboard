{"remainingRequest":"/Users/tevb/Documents/BMS/BMSDashboard/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tevb/Documents/BMS/BMSDashboard/resources/js/components/UserModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tevb/Documents/BMS/BMSDashboard/resources/js/components/UserModal.vue","mtime":1610138455932},{"path":"/Users/tevb/Documents/BMS/BMSDashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tevb/Documents/BMS/BMSDashboard/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGb3JtIGZyb20gJ3Zmb3JtJzsKCiAgZXhwb3J0IGRlZmF1bHQgewogICAgICBwcm9wczp7CiAgICAgICAgcm93OnsKICAgICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICAgIGRlZmF1bHQ6ICgpPT4oe30pLAogICAgICAgIH0KICAgICAgfSwKICAgICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgIGVkaXRtb2RlOiB0cnVlLAogICAgICAgICAgZm9ybTogbmV3IEZvcm0oewogICAgICAgICAgICBpZDogJycsCiAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICBlbWFpbDogJycsCiAgICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgICAgdHlwZTogJycsCiAgICAgICAgICAgIGJpbzogJycsCiAgICAgICAgICAgIHBob3RvOiAnJwogICAgICAgICAgfSkKCiAgICAgICAgfQogICAgICB9LAogICAgICBtZXRob2RzOnsKICAgICAgICB1cGRhdGVVc2VyKGlkPXRoaXMucm93LmlkKXsKICAgICAgICAgIHRoaXMuJFByb2dyZXNzLnN0YXJ0KCk7CiAgICAgICAgICB0aGlzLmZvcm0ucHV0KCdhcGkvdXNlci8nK3RoaXMuZm9ybS5pZCkKICAgICAgICAgIC50aGVuKCgpPT57CiAgICAgICAgICAgIC8vc3VjY2Vzc2Z1bAogICAgICAgICAgICAkKCcjYWRkTmV3JykubW9kYWwoJ2hpZGUnKTsKICAgICAgICAgICAgc3dhbC5maXJlKAogICAgICAgICAgICAgICdVcGRhdGVkIScsCiAgICAgICAgICAgICAgJ1lvdXIgdXNlciBoYXMgYmVlbiB1cGRhdGVkLicsCiAgICAgICAgICAgICAgJ3N1Y2Nlc3MnCiAgICAgICAgICAgICkKICAgICAgICAgICAgdGhpcy4kUHJvZ3Jlc3MuZmluaXNoKCk7CiAgICAgICAgICAgIEZpcmUuJGVtaXQoJ0FmdGVyQ3JlYXRlJyk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICAgIHRoaXMuJFByb2dyZXNzLmZhaWwoKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZWRpdE1vZGFsKHVzZXI9dGhpcy5yb3cpewogICAgICAgICAgdGhpcy5lZGl0bW9kZSA9IHRydWU7CiAgICAgICAgICB0aGlzLmZvcm0ucmVzZXQoKTsKICAgICAgICAgICQoJyNhZGROZXcnKS5tb2RhbCgnc2hvdycpOwogICAgICAgICAgdGhpcy5mb3JtLmZpbGwodXNlcik7CiAgICAgICAgfSwKICAgICAgICBuZXdNb2RhbCgpewogICAgICAgICAgdGhpcy5lZGl0bW9kZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5mb3JtLnJlc2V0KCk7CiAgICAgICAgICAkKCcjYWRkTmV3JykubW9kYWwoJ3Nob3cnKQogICAgICAgIH0sCiAgICAgICAgY3JlYXRlVXNlcigpewogICAgICAgICAgdGhpcy4kUHJvZ3Jlc3Muc3RhcnQoKTsKICAgICAgICAgIHRoaXMuZm9ybS5wb3N0KCdhcGkvdXNlcicpCiAgICAgICAgICAudGhlbigoKT0+ewogICAgICAgICAgICBGaXJlLiRlbWl0KCdBZnRlckNyZWF0ZScpOwoKICAgICAgICAgICAgJCgnI2FkZE5ldycpLm1vZGFsKCdoaWRlJykKCiAgICAgICAgICAgIHRvYXN0LmZpcmUoewogICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICB0aXRsZTogJ1VzZXIgQ3JlYXRlZCBTdWNjZXNzZnVsbHknCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLiRQcm9ncmVzcy5maW5pc2goKTsKCiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpPT57CgogICAgICAgICAgICAkKCcjYWRkTmV3JykubW9kYWwoJ2hpZGUnKQoKICAgICAgICAgICAgc3dhbC5maXJlKCJGYWlsZWQhIiwgIlNvbWV0aGluZyB3ZW50IHdyb25nIiwgIldhcm5pbmciKTsKCiAgICAgICAgICAgIHRoaXMuJFByb2dyZXNzLmZhaWwoKTsKCiAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZvcm1GaWxsZXIoKXsKICAgICAgICAgIHRoaXMuZm9ybS5maWxsKHRoaXMucm93KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNyZWF0ZWQoKXsKICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucm93KTsKICAgICAgICAvL3RoaXMuZm9ybS5maWxsKHRoaXMucm93KTsKICAgICAgfSwKICAgICAgdXBkYXRlZCgpewogICAgICAgIC8vdGhpcy5mb3JtLmZpbGwodGhpcy5yb3cpOwogICAgICB9LAogICAgICBtb3VudGVkKCkgewogICAgICB9CiAgfQo="},{"version":3,"sources":["UserModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserModal.vue","sourceRoot":"components","sourcesContent":["<template>\n  <div class=\"container\">\n    <!-- Modal -->\n    <div class=\"modal fade\"  id=\"addNew\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" v-show=\"!editmode\" id=\"addNewLabel\">Add New</h5>\n            <h5 class=\"modal-title\" v-show=\"editmode\" id=\"addNewLabel\">Update {{row.name}}</h5>\n\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <form @submit.prevent=\"editmode ? updateUser() : createUser()\">\n          <div class=\"modal-body\">\n\n          <div class=\"form-group\">\n                <input v-model=\"form.name\" type=\"text\" name=\"name\"\n                  class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('name') }\" placeholder=\"Username\">\n                <has-error :form=\"form\" field=\"name\"></has-error>\n          </div>\n\n          <div class=\"form-group\">\n                <input v-model=\"form.email\" type=\"text\" name=\"email\"\n                  class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('email') }\" placeholder=\"Email Address\">\n                <has-error :form=\"form\" field=\"email\"></has-error>\n          </div>\n\n          <div class=\"form-group\">\n                <textarea v-model=\"form.bio\" name=\"bio\" id=\"bio\"  placeholder=\"Short bio for user (Optional)\"\n                  class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('bio') }\"></textarea>\n                <has-error :form=\"form\" field=\"bio\"></has-error>\n          </div>\n\n          <div class=\"form-group\">\n                <select name=\"type\" v-model=\"form.type\" id=\"type\" class=\"form-control\" :class=\"{\n                'is-invalid': form.errors.has('type')\n                }\">\n                <option value=\"\">Select User Role</option>\n                <option value=\"admin\">Admin</option>\n                <option value=\"booster\">Booster</option>\n                <option value=\"coach\">Coach</option>\n                <option value=\"client\">Client</option>\n\n                </select>\n                <has-error :form=\"form\" field=\"type\"></has-error>\n          </div>\n\n\n          <div class=\"form-group\">\n                <input v-model=\"form.password\" type=\"password\" name=\"password\" id=\"password\"\n                  class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('password') }\" placeholder=\"Password\">\n                <has-error :form=\"form\" field=\"password\"></has-error>\n          </div>\n\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button v-show=\"editmode\" type=\"submit\" class=\"btn btn-success\">Update</button>\n            <button v-show=\"!editmode\" type=\"submit\" class=\"btn btn-primary\">Create</button>\n\n          </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    </div>\n</template>\n\n<script>\n  import Form from 'vform';\n\n    export default {\n        props:{\n          row:{\n            type: Object,\n            default: ()=>({}),\n          }\n        },\n        data(){\n          return{\n            editmode: true,\n            form: new Form({\n              id: '',\n              name: '',\n              email: '',\n              password: '',\n              type: '',\n              bio: '',\n              photo: ''\n            })\n\n          }\n        },\n        methods:{\n          updateUser(id=this.row.id){\n            this.$Progress.start();\n            this.form.put('api/user/'+this.form.id)\n            .then(()=>{\n              //successful\n              $('#addNew').modal('hide');\n              swal.fire(\n                'Updated!',\n                'Your user has been updated.',\n                'success'\n              )\n              this.$Progress.finish();\n              Fire.$emit('AfterCreate');\n            })\n            .catch(()=>{\n              this.$Progress.fail();\n            });\n          },\n          editModal(user=this.row){\n            this.editmode = true;\n            this.form.reset();\n            $('#addNew').modal('show');\n            this.form.fill(user);\n          },\n          newModal(){\n            this.editmode = false;\n            this.form.reset();\n            $('#addNew').modal('show')\n          },\n          createUser(){\n            this.$Progress.start();\n            this.form.post('api/user')\n            .then(()=>{\n              Fire.$emit('AfterCreate');\n\n              $('#addNew').modal('hide')\n\n              toast.fire({\n                icon: 'success',\n                title: 'User Created Successfully'\n              });\n              this.$Progress.finish();\n\n            })\n            .catch(()=>{\n\n              $('#addNew').modal('hide')\n\n              swal.fire(\"Failed!\", \"Something went wrong\", \"Warning\");\n\n              this.$Progress.fail();\n\n            });\n          },\n          formFiller(){\n            this.form.fill(this.row);\n          }\n        },\n        created(){\n          //console.log(this.row);\n          //this.form.fill(this.row);\n        },\n        updated(){\n          //this.form.fill(this.row);\n        },\n        mounted() {\n        }\n    }\n</script>\n"]}]}