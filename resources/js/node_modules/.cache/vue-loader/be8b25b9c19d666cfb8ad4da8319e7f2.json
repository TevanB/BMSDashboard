{"remainingRequest":"/Users/tevb/Documents/BMS/BMSDashboard/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tevb/Documents/BMS/BMSDashboard/resources/js/components/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tevb/Documents/BMS/BMSDashboard/resources/js/components/Profile.vue","mtime":1613347835508},{"path":"/Users/tevb/Documents/BMS/BMSDashboard/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tevb/Documents/BMS/BMSDashboard/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQgRm9ybSBmcm9tICd2Zm9ybSc7CiAgICBpbXBvcnQgSGFzRXJyb3IgZnJvbSAndmZvcm0nOwogICAgVnVlLmNvbXBvbmVudChIYXNFcnJvci5uYW1lLCBIYXNFcnJvcik7CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgZGF0YSgpewogICAgICAgICAgcmV0dXJuewogICAgICAgICAgICBvcmRlcnM6e30sCiAgICAgICAgICAgIHVzZXI6e30sCiAgICAgICAgICAgIGZvcm06IG5ldyBGb3JtKHsKICAgICAgICAgICAgICBpZDogJycsCiAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgICAgICB0eXBlOiAnJywKICAgICAgICAgICAgICBwYXlvdXQ6JycsCiAgICAgICAgICAgICAgcmFuazonJywKICAgICAgICAgICAgICBiaW86ICcnLAogICAgICAgICAgICAgIHBob3RvOiAnJywKICAgICAgICAgICAgICBvbmdvaW5nX29yZGVyczonJywKICAgICAgICAgICAgICBjb21wbGV0ZWRfb3JkZXJzOicnLAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgb3JkZXJfZm9ybTogbmV3IEZvcm0oewogICAgICAgICAgICAgIG9yZGVyX2lkOiAnJywKICAgICAgICAgICAgICBvcmRlcl90eXBlOiAnJywKICAgICAgICAgICAgICBvcmRlcl9wcmljZTogJycsCiAgICAgICAgICAgICAgb3JkZXJfbWVzc2FnZTogJycsCiAgICAgICAgICAgICAgcGF5b3V0X3N0YXR1czogJycsCiAgICAgICAgICAgICAgY2xpZW50X2lkOiAnJywKICAgICAgICAgICAgICBib29zdGVyX2lkOiAnJywKICAgICAgICAgICAgICBjcmVhdGVkX2F0OiAnJywKICAgICAgICAgICAgfSksCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOnsKICAgICAgICAgIHVwZGF0ZUluZm8oKXsKICAgICAgICAgICAgLy9heGlvcy5wb3N0KCJhcGkvcHJvZmlsZSIsIHRoaXMuZm9ybSk7CiAgICAgICAgICAgIGF4aW9zLnB1dCgiYXBpL3Byb2ZpbGUiLCB0aGlzLmZvcm0pLnRoZW4oKCk9PnsKICAgICAgICAgICAgICBzd2FsLmZpcmUoCiAgICAgICAgICAgICAgICAnUHJvZmlsZSBVcGRhdGVkJywKICAgICAgICAgICAgICAgICdZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgdXBkYXRlZCB5b3VyIHByb2ZpbGUuJywKICAgICAgICAgICAgICAgICdzdWNjZXNzJwogICAgICAgICAgICAgICkudGhlbigocmVzdWx0KT0+ewogICAgICAgICAgICAgICAgaWYocmVzdWx0LnZhbHVlKXsKICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoUGFnZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KS5jYXRjaCgoKT0+ewogICAgICAgICAgICAgIHN3YWwuZmlyZSgKICAgICAgICAgICAgICAgICdTb3JyeSBBYm91dCBUaGF0JywKICAgICAgICAgICAgICAgICdTb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIHVwZGF0aW5nIHlvdXIgcHJvZmlsZS4nLAogICAgICAgICAgICAgICAgJ2Vycm9yJwogICAgICAgICAgICAgICkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9LAogICAgICAgICAgbG9hZE9yZGVycygpewogICAgICAgICAgICBpZih0aGlzLiRnYXRlLmlzV29ya2VyT3JBZG1pbil7CiAgICAgICAgICAgICAgYXhpb3MuZ2V0KCJhcGkvb3JkZXJzIikudGhlbigoZGF0YSk9Pih0aGlzLm9yZGVycz1kYXRhKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBwYXlvdXREYXNoKCl7CiAgICAgICAgICAgIC8vcmVkaXJlY3QgdG8gdXJsIHdpdGggc3RyaXBlIGRhc2hib2FyZAogICAgICAgICAgICBheGlvcy5wb3N0KCdodHRwczovL2Jtcy1iYWNrZW5kLXNldHVwLXBheW91LXJzOHFreS5oZXJva3VhcHAuY29tL2FwaS91c2VyLXN0cmlwZS1kYXNoJykudGhlbigoZGF0YSk9PnsKICAgICAgICAgICAgICBjb25vc2xlLmxvZyhkYXRhLmRhdGEpOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGRhdGEuZGF0YS51cmwpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sCiAgICAgICAgICByZXF1ZXN0QWxsUGF5b3V0cygpewogICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy51c2VyLmN1cnJlbnRfb3JkZXJzX2Fyci5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgaWYodGhpcy51c2VyLmN1cnJlbnRfb3JkZXJzX2FycltpXS5wYXlvdXRfc3RhdHVzICE9ICdjb21wbGV0ZWQnKXsKICAgICAgICAgICAgICAgIGF4aW9zLnB1dCgnaHR0cHM6Ly9ibXMtYmFja2VuZC1zZXR1cC1wYXlvdS1yczhxa3kuaGVyb2t1YXBwLmNvbS9hcGkvcmVxdWVzdEFsbFBheW91dHMvJyt0aGlzLnVzZXIuaWQpLnRoZW4oKGRhdGEpPT57CiAgICAgICAgICAgICAgICAgIHRvYXN0LmZpcmUoewogICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1BheW91dCBSZXF1ZXN0cyBTZW50LicKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZighZm91bmQpewogICAgICAgICAgICAgIHRvYXN0LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnWW91IGhhdmUgbm8gcGF5b3V0cy4nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLypheGlvcy5wdXQoJ2h0dHBzOi8vYm1zLWJhY2tlbmQtc2V0dXAtcGF5b3UtcnM4cWt5Lmhlcm9rdWFwcC5jb20vYXBpL3JlcXVlc3RBbGxQYXlvdXRzLycrdGhpcy51c2VyLmlkKS50aGVuKChkYXRhKT0+ewogICAgICAgICAgICAgIHRvYXN0LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgdGl0bGU6ICdQYXlvdXQgUmVxdWVzdHMgU2VudC4nCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOyovCiAgICAgICAgICAgIC8qZm9yKGxldCBpPTA7IGk8dGhpcy5mb3JtLmN1cnJlbnRfb3JkZXJzX2FycjsgaSsrKXsKICAgICAgICAgICAgICByZXF1ZXN0UGF5b3V0KHRoaXMuZm9ybS5jdXJyZW50X29yZGVyc19hcnJbaV0pOwogICAgICAgICAgICB9Ki8KICAgICAgICAgIH0sCiAgICAgICAgICByZXF1ZXN0UGF5b3V0KG9yZGVyKXsKICAgICAgICAgICAgaWYob3JkZXIucGF5b3V0X3N0YXR1cyAhPSAnY29tcGxldGVkJyl7CiAgICAgICAgICAgICAgb3JkZXIucGF5b3V0X3N0YXR1cyA9ICdyZXF1ZXN0ZWQnOwogICAgICAgICAgICAgIC8vY29uc29sZS5sb2cob3JkZXIpOwogICAgICAgICAgICAgIGF4aW9zLnB1dCgnaHR0cHM6Ly9ibXMtYmFja2VuZC1zZXR1cC1wYXlvdS1yczhxa3kuaGVyb2t1YXBwLmNvbS9hcGkvb3JkZXJzLycrb3JkZXIub3JkZXJfaWQsIG9yZGVyKS50aGVuKCgpPT57CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8dGhpcy51c2VyLmN1cnJlbnRfb3JkZXJzX2Fyci5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICBpZih0aGlzLnVzZXIuY3VycmVudF9vcmRlcnNfYXJyW2ldLm9yZGVyX2lkID09PSBvcmRlci5vcmRlcl9pZCl7CiAgICAgICAgICAgICAgICAgIHRoaXMudXNlci5jdXJyZW50X29yZGVyc19hcnJbaV0ucGF5b3V0X3N0YXR1cyA9ICdyZXF1ZXN0ZWQnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBheGlvcy5wdXQoJ2h0dHBzOi8vYm1zLWJhY2tlbmQtc2V0dXAtcGF5b3UtcnM4cWt5Lmhlcm9rdWFwcC5jb20vYXBpL21lJywgdGhpcy51c2VyKTsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgdG9hc3QuZmlyZSh7CiAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLAogICAgICAgICAgICAgICAgdGl0bGU6ICdUaGlzIHBheW91dCBoYXMgYWxyZWFkeSBiZWVuIHNlbnQuJwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0UHJvZmlsZVBob3RvKCl7CiAgICAgICAgICAgIGxldCBwaG90byA9ICh0aGlzLmZvcm0ucGhvdG8ubGVuZ3RoID4gMTAwKSA/IHRoaXMuZm9ybS5waG90bzogImltZy9wcm9maWxlLyIrdGhpcy5mb3JtLnBob3RvOwogICAgICAgICAgICBpZih0aGlzLmZvcm0ucGhvdG8gPT0gJycpewogICAgICAgICAgICAgIHJldHVybiAiaW1nL3Byb2ZpbGUvcHJvZmlsZS5wbmciOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vcmV0dXJuICJpbWcvcHJvZmlsZS8iK3RoaXMuZm9ybS5waG90bzsKICAgICAgICAgICAgcmV0dXJuIHBob3RvOwogICAgICAgICAgfSwKICAgICAgICAgIHJlZnJlc2hQYWdlKCl7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgIH0sCiAgICAgICAgICBib29zdGVyQ3V0KHRvdGFsUHJpY2UpewogICAgICAgICAgICBsZXQgYWRqdXN0ZWRQcmljZSA9ICh0b3RhbFByaWNlKjAuOTYpLTAuMzsKICAgICAgICAgICAgbGV0IGJDdXQgPSBNYXRoLmZsb29yKGFkanVzdGVkUHJpY2UqMC43KTsKICAgICAgICAgICAgcmV0dXJuIGJDdXQ7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0VXNlcigpewogICAgICAgICAgICBheGlvcy5nZXQoImh0dHBzOi8vYm1zLWJhY2tlbmQtc2V0dXAtcGF5b3UtcnM4cWt5Lmhlcm9rdWFwcC5jb20vYXBpL21lIikudGhlbigoZGF0YSk9PnsKICAgICAgICAgICAgICB0aGlzLnVzZXIgPSBkYXRhLmRhdGE7CiAgICAgICAgICAgICAgLy8vL2NvbnNvbGUubG9nKHRoaXMudXNlcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSwKICAgICAgICAgIHBzVHJhbnNsYXRlKHN0YXR1cyl7CiAgICAgICAgICAgIGlmKHN0YXR1cyA9PT0gJ2luLXByb2dyZXNzJyl7CiAgICAgICAgICAgICAgcmV0dXJuICdQYXlvdXQgVW5wYWlkJzsKICAgICAgICAgICAgfWVsc2UgaWYoc3RhdHVzID09PSAncHJvY2Vzc2VkJyl7CiAgICAgICAgICAgICAgcmV0dXJuICdQYXlvdXQgVW5wYWlkJzsKICAgICAgICAgICAgfWVsc2UgaWYoc3RhdHVzID09PSAncmVxdWVzdGVkJyl7CiAgICAgICAgICAgICAgcmV0dXJuICdQYXlvdXQgUmVxdWVzdGVkJzsKICAgICAgICAgICAgfWVsc2UgaWYoc3RhdHVzID09PSAnY29tcGxldGVkJyl7CiAgICAgICAgICAgICAgcmV0dXJuICdQYXlvdXQgU2VudCc7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHJldHVybiAiTi9BIgogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgdXBkYXRlUHJvZmlsZShlKXsKICAgICAgICAgICAgbGV0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgIGlmKGZpbGVbJ3NpemUnXTwyMTExNzc1KXsKICAgICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKGZpbGUpPT57CiAgICAgICAgICAgICAgICB0aGlzLmZvcm0ucGhvdG89cmVhZGVyLnJlc3VsdDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHRvYXN0LmZpcmUoewogICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgIHRpdGxlOiAnRmlsZSB0b28gbGFyZ2UgdG8gdXBsb2FkLicKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICBtb3VudGVkKCkgewogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdDb21wb25lbnQgbW91bnRlZC4nKTsKICAgICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgICB3aW5kb3cuRWNoby5wcml2YXRlKCdjbGFpbXMnKQogICAgICAgICAgICAgIC5saXN0ZW4oJ29yZGVyLWNsYWltZWQnLCAoZSkgPT4gewogICAgICAgICAgICAgIC8vLy9jb25zb2xlLmxvZygiT3JkZXIgY2xhaW0gaGVhcmQhISIpOwogICAgICAgICAgICAgIC8vLy9jb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGF0LnVzZXIub25nb2luZ19vcmRlcnNfYXJyLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgIGlmKGUub3JkZXJJRCA9PT0gdGhhdC51c2VyLm9uZ29pbmdfb3JkZXJzX2FycltpXS5vcmRlcl9pZCAmJiB0aGF0LnVzZXIudHlwZSA9PT0gJ2NsaWVudCcpewogICAgICAgICAgICAgICAgc3dhbC5maXJlKHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnT3JkZXIgQ2xhaW1lZCcsCiAgICAgICAgICAgICAgICB0ZXh0OiAnWW91ciBvcmRlciBoYXMgYmVlbiBjbGFpbWVkIGJ5IGEgYm9vc3Rlci4nLAogICAgICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdHbyBUbyBPcmRlciBQYWdlJwogICAgICAgICAgICAgICAgfSkudGhlbigocmVzdWx0KT0+ewogICAgICAgICAgICAgICAgICBpZihyZXN1bHQudmFsdWUpewogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKCdodHRwczovL2Jtcy1iYWNrZW5kLXNldHVwLXBheW91LXJzOHFreS5oZXJva3VhcHAuY29tL29yZGVyLycrZS5vcmRlcklEKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgY3JlYXRlZCgpewogICAgICAgICAgdGhpcy5sb2FkT3JkZXJzKCk7CiAgICAgICAgICBGaXJlLiRvbignQWZ0ZXJDcmVhdGUnLCAoKT0+ewogICAgICAgICAgICB0aGlzLmxvYWRPcmRlcnMoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5nZXRVc2VyKCk7CiAgICAgICAgICBheGlvcy5nZXQoImFwaS9tZSIpLnRoZW4oKGRhdGEpPT4odGhpcy5mb3JtLmZpbGwoZGF0YS5kYXRhKSkpOwogICAgICAgICAgRmlyZS4kb24oJ0FmdGVyQ3JlYXRlJywgKCk9PnsKICAgICAgICAgICAgYXhpb3MuZ2V0KCJhcGkvbWUiKS50aGVuKChkYXRhKT0+KHRoaXMuZm9ybS5maWxsKGRhdGEuZGF0YSkpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQp9Owo="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Profile.vue","sourceRoot":"components","sourcesContent":["\n\n<template>\n    <div class=\"container\">\n        <div class=\"row justify-content-center\">\n            <div class=\"col-md-12 mt-3\">\n\n                      <div class=\"card card-widget widget-user bg-secondary\">\n                          <!-- Add the bg color to the header using any of the bg-* classes -->\n                          <div class=\"widget-user-header text-grey\" style=\"background:url('./img/blackfrost-reksai.jpeg')\">\n                            <h3 class=\"widget-user-desc text-right\">{{this.user.name | upText}}</h3>\n                            <h5 class=\"widget-user-username text-right\">{{this.user.type | upText}}</h5>\n                          </div>\n                          <div class=\"widget-user-image \">\n                            <img class=\"img-circle bg-light\" :src=\"getProfilePhoto()\" alt=\"User Avatar\">\n                          </div>\n                          <div class=\"card-header\">\n                            <div class=\"row mt-3\">\n                              <div class=\"col-sm-4 border-right\">\n                                <div class=\"description-block\">\n                                  <h5 class=\"description-header\">{{this.user.ongoing_orders}}</h5>\n                                  <span class=\"description-text\">ONGOING ORDERS</span>\n                                </div>\n                                <!-- /.description-block -->\n                              </div>\n                              <!-- /.col -->\n                              <div class=\"col-sm-4 border-right\">\n                                <div class=\"description-block\">\n                                  <h5 class=\"description-header\">{{this.user.completed_orders}}</h5>\n                                  <span class=\"description-text\">COMPLETED ORDERS</span>\n                                </div>\n                                <!-- /.description-block -->\n                              </div>\n                              <!-- /.col -->\n                              <div class=\"col-sm-4\">\n                                <div class=\"description-block\" v-if=\"$gate.isWorkerOrAdmin()\">\n                                  <h5 class=\"description-header\">{{this.user.rank}}</h5>\n                                  <span class=\"description-text\">RANK</span>\n                                </div>\n                                <div class=\"description-block\" v-if=\"$gate.isClient()\">\n                                  <h5 class=\"description-header\">{{this.user.created_at | myDate2}}</h5>\n                                  <span class=\"description-text\">REGISTRATION DATE</span>\n                                </div>\n                                <!-- /.description-block -->\n                              </div>\n                              <!-- /.col -->\n                            </div>\n                            <!-- /.row -->\n                          </div>\n                        </div>\n\n                        <div class=\"card\">\n                                      <div class=\"card-header p-2\">\n                                        <ul class=\"nav nav-pills\">\n                                          <li class=\"nav-item\"><a class=\"nav-link active\" href=\"#settings\" data-toggle=\"tab\">Account</a></li>\n                                          <li class=\"nav-item\"  v-if=\"$gate.isBoosterOrCoach()\"><a class=\"nav-link\" href=\"#orders\" data-toggle=\"tab\">Orders</a></li>\n                                          <li class=\"nav-item\"  v-if=\"$gate.isBoosterOrCoach()\"><a class=\"nav-link\" href=\"#payouts\" data-toggle=\"tab\">Payouts</a></li>\n\n                                        </ul>\n                                      </div><!-- /.card-header -->\n                                      <div class=\"card-body\">\n                                        <div class=\"tab-content\">\n                                          <div class=\"tab-pane\" id=\"orders\"  v-if=\"$gate.isBoosterOrCoach()\">\n\n                                            <div class=\"card-header\">\n                                              <h3 class=\"card-title\">Order History (Completed)</h3>\n                                              <div class=\"card-tools\">\n                                              <button class=\"btn btn-success\" @click=\"requestAllPayouts()\">Request All Payouts\n                                              <i class=\"fas fa-arrows-alt-v\"></i>\n                                              </button>\n                                            </div>\n                                          </div>\n                                          <div class=\"card-body table-responsive p-0\">\n                                            <table class=\"table table-hover\">\n                                              <thead>\n                                                <tr>\n                                                  <th>Order ID</th>\n                                                  <th>Order Type</th>\n                                                  <th>Order Payout</th>\n                                                  <th>Payout Status</th>\n                                                  <th>Order Date</th>\n\n                                                </tr>\n                                              </thead>\n                                              <tbody>\n                                                <tr v-for=\"order in user.current_orders_arr\" :key=\"order.order_id\">\n\n                                                  <td>{{order.order_id}}</td>\n\n                                                  <td>{{order.order_type}}</td>\n                                                  <td>{{boosterCut(order.order_price)}}</td>\n                                                  <td>{{psTranslate(order.payout_status)|upText}}</td>\n                                                  <td>{{order.created_at|myDate}}</td>\n\n                                                  <td>\n                                                    <div v-if=\"order.payout_status != 'completed' && order.payout_status != 'requested'\">\n                                                    <button class=\"btn btn-block btn-primary\" @click=\"requestPayout(order)\">Request Payout</button>\n                                                    </div>\n                                                  </td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </div>\n\n                                          </div>\n                                          <!-- /.tab-pane -->\n\n                                          <div class=\"tab-pane\" id=\"payouts\"  v-if=\"$gate.isBoosterOrCoach()\">\n                                            <div class=\"card-header\">\n                                              <h3 class=\"card-title\">Payout Info</h3>\n                                              <div class=\"card-tools\">\n                                              <button class=\"btn btn-success\" @click=\"payoutDash()\">Payout Dashboard\n                                              <i class=\"fas fa-arrows-alt-v\"></i>\n                                              </button>\n                                              </div>\n                                            </div>\n\n                                            <div class=\"card-body\">\n                                              <!-- Add Stripe UI for Payouts -->\n                                            </div>\n                                          </div>\n\n                                          <!-- /.tab-pane -->\n\n                                          <div class=\"tab-pane active\" id=\"settings\">\n                                          <form @submit.prevent=\"updateInfo()\">\n\n                                            <div class=\"form-group\">\n                                            <label for=\"name\" class=\"col-sm-2\">Username</label>\n\n                                                  <input v-model=\"form.name\" type=\"text\" name=\"name\"\n                                                    class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('name') }\" placeholder=\"Username\">\n                                                  <has-error :form=\"form\" field=\"name\"></has-error>\n                                            </div>\n\n                                            <div class=\"form-group\">\n                                            <label for=\"email\" class=\"col-sm-2\">Email</label>\n\n                                                  <input v-model=\"form.email\" type=\"text\" name=\"email\"\n                                                    class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('email') }\" placeholder=\"Email Address\">\n                                                  <has-error :form=\"form\" field=\"email\"></has-error>\n                                            </div>\n\n                                            <div class=\"form-group\">\n                                            <label for=\"bio\" class=\"col-sm-2\">User Bio</label>\n\n                                                  <textarea v-model=\"form.bio\" name=\"bio\" id=\"bio\"  placeholder=\"Short bio for user (Optional)\"\n                                                    class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('bio') }\"></textarea>\n                                                  <has-error :form=\"form\" field=\"bio\"></has-error>\n                                            </div>\n\n\n                                                      <div class=\"form-group\">\n                                                          <label for=\"photo\" class=\"col-sm-2\">Profile Photo</label>\n                                                            <input type=\"file\" name=\"photo\"\n                                                              @change=\"updateProfile\" class=\"form-input\" >\n                                                      </div>\n\n                                            <div class=\"form-group\">\n                                            <label for=\"password\" class=\"col-sm-2\">Password</label>\n\n                                                  <input v-model=\"form.password\" type=\"password\" name=\"password\" id=\"password\"\n                                                    class=\"form-control\" :class=\"{ 'is-invalid': form.errors.has('password') }\" placeholder=\"Password\">\n                                                  <has-error :form=\"form\" field=\"password\"></has-error>\n                                            </div>\n\n\n                                              <button type=\"button\" class=\"btn btn-secondary\">Close</button>\n                                              <button type=\"submit\" class=\"btn btn-success\">Update</button>\n\n\n                                          </form>\n                                          </div>\n                                          <!-- /.tab-pane -->\n                                        </div>\n                                        <!-- /.tab-content -->\n\n                                      </div><!-- /.card-body -->\n                                    </div>\n                                    </div>\n                                </div>\n                            </div>\n</template>\n\n<script>\n    import Form from 'vform';\n    import HasError from 'vform';\n    Vue.component(HasError.name, HasError);\n    export default {\n        data(){\n          return{\n            orders:{},\n            user:{},\n            form: new Form({\n              id: '',\n              name: '',\n              email: '',\n              password: '',\n              type: '',\n              payout:'',\n              rank:'',\n              bio: '',\n              photo: '',\n              ongoing_orders:'',\n              completed_orders:'',\n            }),\n            order_form: new Form({\n              order_id: '',\n              order_type: '',\n              order_price: '',\n              order_message: '',\n              payout_status: '',\n              client_id: '',\n              booster_id: '',\n              created_at: '',\n            }),\n          }\n        },\n        methods:{\n          updateInfo(){\n            //axios.post(\"api/profile\", this.form);\n            axios.put(\"api/profile\", this.form).then(()=>{\n              swal.fire(\n                'Profile Updated',\n                'You have successfully updated your profile.',\n                'success'\n              ).then((result)=>{\n                if(result.value){\n                  this.refreshPage();\n                }\n              });\n            }).catch(()=>{\n              swal.fire(\n                'Sorry About That',\n                'Something went wrong with updating your profile.',\n                'error'\n              )\n            });\n          },\n          loadOrders(){\n            if(this.$gate.isWorkerOrAdmin){\n              axios.get(\"api/orders\").then((data)=>(this.orders=data));\n            }\n          },\n          payoutDash(){\n            //redirect to url with stripe dashboard\n            axios.post('https://bms-backend-setup-payou-rs8qky.herokuapp.com/api/user-stripe-dash').then((data)=>{\n              conosle.log(data.data);\n              window.location.replace(data.data.url);\n            });\n          },\n          requestAllPayouts(){\n            let found = false;\n            for(let i=0; i<this.user.current_orders_arr.length; i++){\n              if(this.user.current_orders_arr[i].payout_status != 'completed'){\n                axios.put('https://bms-backend-setup-payou-rs8qky.herokuapp.com/api/requestAllPayouts/'+this.user.id).then((data)=>{\n                  toast.fire({\n                    icon: 'success',\n                    title: 'Payout Requests Sent.'\n                  });\n                });\n                found = true;\n                break;\n              }\n            }\n            if(!found){\n              toast.fire({\n                icon: 'error',\n                title: 'You have no payouts.'\n              });\n            }\n            /*axios.put('https://bms-backend-setup-payou-rs8qky.herokuapp.com/api/requestAllPayouts/'+this.user.id).then((data)=>{\n              toast.fire({\n                icon: 'success',\n                title: 'Payout Requests Sent.'\n              });\n            });*/\n            /*for(let i=0; i<this.form.current_orders_arr; i++){\n              requestPayout(this.form.current_orders_arr[i]);\n            }*/\n          },\n          requestPayout(order){\n            if(order.payout_status != 'completed'){\n              order.payout_status = 'requested';\n              //console.log(order);\n              axios.put('https://bms-backend-setup-payou-rs8qky.herokuapp.com/api/orders/'+order.order_id, order).then(()=>{\n              });\n              for(let i=0; i<this.user.current_orders_arr.length; i++){\n                if(this.user.current_orders_arr[i].order_id === order.order_id){\n                  this.user.current_orders_arr[i].payout_status = 'requested';\n                }\n              }\n              axios.put('https://bms-backend-setup-payou-rs8qky.herokuapp.com/api/me', this.user);\n            }else{\n              toast.fire({\n                icon: 'error',\n                title: 'This payout has already been sent.'\n              });\n            }\n          },\n          getProfilePhoto(){\n            let photo = (this.form.photo.length > 100) ? this.form.photo: \"img/profile/\"+this.form.photo;\n            if(this.form.photo == ''){\n              return \"img/profile/profile.png\";\n            }\n            //return \"img/profile/\"+this.form.photo;\n            return photo;\n          },\n          refreshPage(){\n            window.location.reload();\n          },\n          boosterCut(totalPrice){\n            let adjustedPrice = (totalPrice*0.96)-0.3;\n            let bCut = Math.floor(adjustedPrice*0.7);\n            return bCut;\n          },\n          getUser(){\n            axios.get(\"https://bms-backend-setup-payou-rs8qky.herokuapp.com/api/me\").then((data)=>{\n              this.user = data.data;\n              ////console.log(this.user);\n            });\n          },\n          psTranslate(status){\n            if(status === 'in-progress'){\n              return 'Payout Unpaid';\n            }else if(status === 'processed'){\n              return 'Payout Unpaid';\n            }else if(status === 'requested'){\n              return 'Payout Requested';\n            }else if(status === 'completed'){\n              return 'Payout Sent';\n            }else{\n              return \"N/A\"\n            }\n          },\n          updateProfile(e){\n            let file = e.target.files[0];\n            let reader = new FileReader();\n            if(file['size']<2111775){\n              reader.onloadend = (file)=>{\n                this.form.photo=reader.result;\n              }\n              reader.readAsDataURL(file);\n            }else{\n              toast.fire({\n                icon: 'error',\n                title: 'File too large to upload.'\n              });\n            }\n          }\n          },\n        mounted() {\n            //console.log('Component mounted.');\n            let that = this;\n            window.Echo.private('claims')\n              .listen('order-claimed', (e) => {\n              ////console.log(\"Order claim heard!!\");\n              ////console.log(e);\n              for(let i=0; i<that.user.ongoing_orders_arr.length; i++){\n                if(e.orderID === that.user.ongoing_orders_arr[i].order_id && that.user.type === 'client'){\n                swal.fire({\n                title: 'Order Claimed',\n                text: 'Your order has been claimed by a booster.',\n                icon: 'success',\n                confirmButtonText: 'Go To Order Page'\n                }).then((result)=>{\n                  if(result.value){\n                    window.location.replace('https://bms-backend-setup-payou-rs8qky.herokuapp.com/order/'+e.orderID);\n                  }\n                })\n                  break;\n                }\n              }\n              });\n        },\n        created(){\n          this.loadOrders();\n          Fire.$on('AfterCreate', ()=>{\n            this.loadOrders();\n          });\n          this.getUser();\n          axios.get(\"api/me\").then((data)=>(this.form.fill(data.data)));\n          Fire.$on('AfterCreate', ()=>{\n            axios.get(\"api/me\").then((data)=>(this.form.fill(data.data)));\n            });\n        }\n};\n</script>"]}]}